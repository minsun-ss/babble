<!-- templates/index.html -->
<!doctype html>
<html>
    <head>
        <title>Vertical Menu</title>
        <script src="https://unpkg.com/htmx.org@1.9.10"></script>
        <style>
            body {
                margin: 0;
                padding: 0;
                display: flex;
            }

            .nav-menu {
                width: 250px;
                background: #2c3e50;
                min-height: 100vh;
                padding: 20px 0;
                color: white;
            }

            .menu-item {
                padding: 12px 25px;
                cursor: pointer;
                transition: background 0.3s;
                position: relative;
            }

            .menu-item:hover {
                background: #34495e;
            }

            .menu-item a {
                color: white;
                text-decoration: none;
                display: block;
            }

            .submenu {
                position: absolute;
                left: 250px; /* Width of nav-menu */
                top: 0;
                transform: translateY(var(--menu-offset));
                background: #34495e;
                width: 200px; /* Width of dropdown */
                display: none; /* Hide by default */
            }

            .submenu.show {
                display: block;
            }

            .submenu .menu-item {
                padding-left: 40px;
                font-size: 0.9em;
            }

            .menu-item.has-children::after {
                content: "â–¼";
                position: absolute;
                right: 20px;
                top: 50%;
                transform: translateY(-50%);
                font-size: 0.8em;
                transition: transform 0.3s;
            }

            .menu-item.active.has-children::after {
                transform: translateY(-50%) rotate(-90deg);
            }

            .content-area {
                flex: 1;
                padding: 20px;
                background: #f5f5f5;
            }
        </style>
    </head>
    <body>
        <nav class="nav-menu">
            {{range .}} {{if .Children}}
            <div
                class="menu-item has-children"
                hx-on="click:
                        /* this closes the menu */
                        document.querySelectorAll('.submenu.show').forEach(menu => {
                                                if (menu !== this.nextElementSibling) {
                                                    menu.classList.remove('show');
                                                    menu.previousElementSibling.classList.remove('active');
                                                }
                                            });
                        /* once closed, this can be used to open the new one */
                        let offset = this.offsetTop;
                        let submenu = this.nextElementSibling;
                        submenu.style.setProperty('--menu-offset', offset + 'px');
                        submenu.classList.toggle('show');
                        this.classList.toggle('active')"
            >
                {{.Title}}
            </div>
            <div class="submenu">
                {{range .Children}}
                <div class="menu-item">
                    <a href="{{.Link}}">{{.Title}}</a>
                </div>
                {{end}}
            </div>
            {{else}}
            <div class="menu-item">
                <a href="{{.Link}}">{{.Title}}</a>
            </div>
            {{end}} {{end}}
        </nav>

        <main class="content-area">
            <h1>Welcome to the Dashboard</h1>
            <p>This is the main content area. You can put any content here.</p>

            <h2>Sample Content</h2>
            <p>
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do
                eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut
                enim ad minim veniam, quis nostrud exercitation ullamco laboris
                nisi ut aliquip ex ea commodo consequat.
            </p>

            <h2>Features</h2>
            <ul>
                <li>Responsive layout</li>
                <li>Vertical navigation</li>
                <li>Horizontal dropdowns</li>
                <li>Clean design</li>
            </ul>
        </main>
    </body>
</html>
