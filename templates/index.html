<!-- templates/index.html -->
<!doctype html>
<html>
    <head>
        <title>Vertical Menu</title>
        <script src="https://unpkg.com/htmx.org@1.9.10"></script>
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Oswald:wght@300;400;500;700&display=swap"
            rel="stylesheet"
        />
        <link
            href="https://fonts.googleapis.com/css2?family=Source+Serif+4:ital,opsz,wght@0,8..60,200..900;1,8..60,200..900&display=swap"
            rel="stylesheet"
        />
        <style>
            h1 {
                font-family: "Oswald", sans-serif;
                font-size: 6rem;
                margin: 0;
            }

            body {
                margin: 0;
                padding: 0;
                display: flex;
                font-family: "Source Serif 4", serif;
            }

            .nav-menu {
                width: 250px;
                background: #000000;
                min-height: 100vh;
                padding: 20px 0;
                color: white;
            }

            .menu-item {
                padding: 12px 25px;
                cursor: pointer;
                transition: background 0.3s;
                position: relative;
            }

            .menu-item:hover {
                background: #1a1a1a;
            }

            .menu-item a {
                color: white;
                text-decoration: none;
                display: block;
            }

            .submenu {
                position: absolute;
                left: 250px; /* Width of nav-menu */
                top: 0;
                transform: translateY(var(--menu-offset));
                background: #1a1a1a;
                width: 200px; /* Width of dropdown */
                display: none; /* Hide by default */
            }

            .submenu.show {
                display: block;
            }

            .submenu .menu-item {
                padding-left: 40px;
                font-size: 0.9em;
            }

            .menu-item.has-children::after {
                content: "â—€";
                position: absolute;
                right: 20px;
                top: 50%;
                transform: translateY(-50%);
                font-size: 0.8em;
                transition: transform 0.3s;
            }

            .menu-item.active.has-children::after {
                transform: translateY(-50%) rotate(-180deg);
            }

            .content-area {
                flex: 1;
                padding: 20px;
                background: #f5f5f5;
                display: flex;
                flex-direction: column;
                justify-content: flex-start;
                text-align: left;
            }

            .content-area h1,
            .content-area blockquote {
                text-align: right;
                margin-left: auto;
                width: 100%;
            }
            .content-area p {
                text-align: left;
                width: 80%;
            }
        </style>
    </head>
    <body>
        <nav class="nav-menu">
            {{range .}} {{if .Children}}
            <div
                class="menu-item has-children"
                hx-on="click:
                        /* this closes the menu */
                        document.querySelectorAll('.submenu.show').forEach(menu => {
                                                if (menu !== this.nextElementSibling) {
                                                    menu.classList.remove('show');
                                                    menu.previousElementSibling.classList.remove('active');
                                                }
                                            });
                        /* once closed, this can be used to open the new one */
                        let offset = this.offsetTop;
                        let submenu = this.nextElementSibling;
                        submenu.style.setProperty('--menu-offset', offset + 'px');
                        submenu.classList.toggle('show');
                        this.classList.toggle('active')"
            >
                {{.Title}}
            </div>
            <div class="submenu">
                {{range .Children}}
                <div class="menu-item">
                    <a href="{{.Link}}">{{.Title}}</a>
                </div>
                {{end}}
                <div class="menu-item">
                    <a
                        href="{{.More}}"
                        hx-get="{{.More}}"
                        hx-target="main.content-area"
                        hx-swap="innerHTML"
                        hx-on="click:
                        document.querySelectorAll('.submenu.show').forEach(menu => {
                              menu.classList.remove('show');
                              menu.previousElementSibling.classList.remove('active');
                          })"
                        >More</a
                    >
                </div>
            </div>
            {{else}}
            <div class="menu-item">
                <a href="{{.Link}}">{{.Title}}</a>
            </div>
            {{end}} {{end}}
        </nav>

        <main class="content-area">
            <h1>Babel</h1>
            <blockquote>
                <i
                    >I repeat: In order for a book to exist, it is sufficient
                    that it be possible. Only the impossible is excluded.</i
                >
                <br />
                Jorge Luis Borges
            </blockquote>

            <h2>Introduction</h2>
            <p>
                Named after the short story "The Library of Babel" by Jorge Luis
                Borges, this attempts to consolidate all the documentation of
                TA-managed user-facing libraries into one place, including (if
                available) relevant changelogs and versioning.
            </p>
            <p>
                This project was <i>almost</i> named after House of Leaves, but
                thought better of it. The Library of Babel isn't that far off in
                a sense to the short story "Tower of Babylon" by Ted Chiang,
                either.
            </p>
            <p>
                Deployment is Golang + Mariadb + HTMX for the simplicity of this
                combo relative to its features.
            </p>

            <h2>Contact</h2>
            <p>TA Global: TA.Global@flowtraders.com</p>
        </main>
    </body>
</html>
